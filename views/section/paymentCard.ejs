<%- layout('boilerplate/boilerplate') -%>
<main>
  <section id="payment-card">
    <%- include('../partials/flash') %>
    <h1 class="text-center">Card Payment</h1>
    <h4 class="text-center">Total Amount: Rp <%= dotTotalPrices(cart.totalPrices) %>,00</h4>
    <form action="/payment?paymentMethod=<%= method %>&cartId=<%= cart.id %>" id="form-payment-card" method="post" tp="<%= cart.totalPrices %>">
      <div class="mb-3 card-number">
        <label for="card-number" class="form-label">Card Number</label>
        <input type="text" class="form-control" id="card-number" name="card_number" placeholder="•••• •••• •••• ••••">
      </div>
      <div class="mb-3 exp-month">
        <label for="exp-month" class="form-label">Expired Month</label>
        <input type="number" class="form-control" id="exp-month" name="card_exp_month" placeholder="MM" min="1" max="12">
      </div>
      <div class="mb-3 exp-year">
        <label for="exp-year" class="form-label">Expired Year</label>
        <input type="number" class="form-control" id="exp-year" name="card_exp_year" placeholder="YYYY" min="<%= minYear %>">
      </div>
      <div class="mb-3 card-cvn">
        <label for="card-cvn" class="form-label">Cvc Code</label>
        <input type="number" name="card_cvn" id="card-cvn" class="form-control" placeholder="•••">
      </div>
      <div class="hidden-inputs">
      </div>
      <div class="submit-card-btn">
        <button class="btn btn-lg pay-btn" id="pay-card">Pay</button>
      </div>
    </form>

    <p id="pay-card-error"></p>

    <div class="modal fade" id="modal3DS" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="modal3DSLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <iframe id="iframe-card-payment" frameborder="0"></iframe>
        </div>
      </div>
    </div>
  </section>

  <%- include('../partials/cantGoBack') %> 
</main>